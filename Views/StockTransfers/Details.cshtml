@model MNBEMART.Models.StockTransfer
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
@{
    ViewData["Title"] = "Chi tiết phiếu chuyển kho";
}
<div class="container-fluid py-3">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="mb-0">Phiếu chuyển kho: @Model.TransferNumber</h3>
        <div class="d-flex gap-2">
            <a class="btn btn-outline-secondary" asp-action="Index">Quay lại</a>
            @if (Model.Status == MNBEMART.Models.DocumentStatus.Moi && User.IsInRole("admin"))
            {
                <form asp-action="Approve" method="post" onsubmit="return confirm('Duyệt phiếu này?');">
                    @Html.AntiForgeryToken()
                    <input type="hidden" name="id" value="@Model.Id" />
                    <button class="btn btn-success">Duyệt</button>
                </form>
            }
        </div>
    </div>

    <div class="row g-3 mb-3">
        <div class="col-md-3"><div class="form-control">Kho đi: <strong>@Model.FromWarehouse?.Name</strong></div></div>
        <div class="col-md-3"><div class="form-control">Kho đến: <strong>@Model.ToWarehouse?.Name</strong></div></div>
        <div class="col-md-3"><div class="form-control">Ngày tạo: <strong>@Model.CreatedAt.ToLocalTime().ToString("dd/MM/yyyy HH:mm")</strong></div></div>
        <div class="col-md-3">
            <div class="form-control">Trạng thái:
                @if (Model.Status == MNBEMART.Models.DocumentStatus.Moi)
                { <span class="badge text-bg-warning">Mới</span> }
                else if (Model.Status == MNBEMART.Models.DocumentStatus.DaXacNhan)
                { <span class="badge text-bg-success">Đã xác nhận</span> }
            </div>
        </div>
    </div>

    <div class="card shadow-sm">
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-sm table-bordered align-middle mb-0">
                    <thead class="table-light text-center">
                        <tr>
                            <th>Mã - Tên vật tư</th>
                            <th class="text-end">Số lượng</th>
                            <th>ĐVT</th>
                            <th>Ghi chú</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var d in Model.Details)
                        {
                            <tr>
                                <td>@d.Material?.Code - @d.Material?.Name</td>
                                <td class="text-end">@d.Quantity</td>
                                <td>@d.Unit</td>
                                <td>@d.Note</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
