@* <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - MNBEMART</title>
    <script type="importmap"></script>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/MNBEMART.styles.css" asp-append-version="true" />
</head>
<body>
    @* <header>
        <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3">
            <div class="container-fluid">
                <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index">MNBEMART</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="navbar-collapse collapse d-sm-inline-flex justify-content-between">
                    <ul class="navbar-nav flex-grow-1">
                        <li class="nav-item">
                            <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Index">Trang chủ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header> *@
  
    @* @await Html.PartialAsync("_Header")
    <div class="container">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div>

    <footer class="border-top footer text-muted">
        <div class="container">
            &copy; 2025 - MNBEMART - <a asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
        </div>
    </footer>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html> *@ 

@* @{
    Layout = null;
    var username = User.Identity.IsAuthenticated ? User.Identity.Name : "Khách";
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>@ViewData["Title"] - BEMART</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link rel="stylesheet" href="~/css/Style.css" asp-append-version="true" />
    <style>
        body {
            background-color: #f5f7fa;
        }
        .sidebar {
            background-color: #1877f2;
            color: white;
            min-height: 100vh;
            width: 250px;
        }
        .sidebar a {
            color: white;
            text-decoration: none;
        }
        .sidebar a:hover {
            background-color: #d1d6de;
        }
        .navbar-brand {
            color: #1877f2;
            font-weight: bold;
        }
        .nav-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: cover;
        }
        .content-wrapper {
            margin-left: 250px;
            padding: 20px;
        }
    </style>
</head>
<body>
    <div class="d-flex">
        <!-- Sidebar -->
        <div class="sidebar d-flex flex-column p-3 position-fixed">
            <h4 class="mb-4">BEMART</h4>
            <ul class="nav nav-pills flex-column mb-auto">
                <li><a href="/Home/Dashboard" class="nav-link"><i class="fas fa-home me-2"></i>Trang chủ</a></li>
                <li><a href="/Materials/Index" class="nav-link"><i class="fas fa-boxes me-2"></i>Nguyên liệu</a></li>
                <li><a href="/Warehouses/Index" class="nav-link"><i class="fas fa-warehouse me-2"></i>Kho hàng</a></li>
                <li><a href="/Suppliers/Index" class="nav-link"><i class="fas fa-truck-loading me-2"></i>Nhà cung cấp</a></li>
                <li><a href="/StockReceipts/Index" class="nav-link"><i class="fas fa-exchange-alt me-2"></i>Nhập kho</a></li>
                <li><a href="/StockIssues/Index" class="nav-link"><i class="fas fa-truck me-2"></i>Xuất kho</a></li>
                <li><a href="/Stocks/Index" class="nav-link"><i class="fas fa-boxes me-2"></i>Tồn Kho</a></li>
                

            
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"><i class="fas fa-chart-line me-2"></i>Báo cáo</a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="/Reports/Revenue">Doanh thu</a></li>
                        <li><a class="dropdown-item" href="/Reports/Movements">Nhập/Xuất</a></li>
                        <li><a class="dropdown-item" href="/Reports/Inventory">Tồn kho</a></li>
                    </ul>
                </li>
                @if (User.IsInRole("admin"))
                {
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">Kho</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="/StockTransfers/Index">Chuyển kho</a></li>
                            <li><a class="dropdown-item" href="/StockAdjustments/Index">Điều chỉnh tồn</a></li>
                        </ul>
                    </li>
                    <li><a href="/Users/Index" class="nav-link"><i class="fas fa-users me-2"></i>Người dùng</a></li>
                    <li><a href="/Roles" class="nav-link"><i class="fas fa-user-shield me-2"></i>Phân quyền</a></li>
                }
            </ul>
        </div>

        <!-- Main content -->
        <div class="content-wrapper w-100">
            <!-- Navbar -->
            <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm px-4">
                <div class="container-fluid">
                    <span class="navbar-brand">Quản lý kho BEMART</span>
                    <div class="ms-auto d-flex align-items-center gap-2">
                        <span class="fw-semibold text-primary">@username</span>
                        <img src="/uploads/user.jpg" alt="Avatar" class="nav-avatar" />
                        <a href="/Account/Login" class="btn btn-sm btn-outline-primary">Đăng xuất</a>
                    </div>
                </div>
            </nav>

            <!-- Nội dung trang -->
            <main role="main" class="mt-4">
                @RenderBody()
            </main>

            <footer class="text-center text-muted py-4">
                © @DateTime.Now.Year - BEMART Quản lý kho
            </footer>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html> *@

@{
    ViewData["Title"] ??= "BEMART";
    var username = User?.Identity?.IsAuthenticated == true
        ? (User.Identity!.Name ?? "Người dùng")
        : "Khách";
}
<!DOCTYPE html>
<html lang="vi" class="h-full">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>@ViewData["Title"] - BEMART</title>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

    <!-- Font Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter','system-ui','sans-serif'] },
                    colors: {
                        primary: {500:'#3b82f6',600:'#2563eb',700:'#1d4ed8'}
                    }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; }
        .nav-active { 
            background-color: rgba(59,130,246,0.15) !important; 
            color: #2563eb !important;
            font-weight: 600;
        }
        .dropdown-menu { z-index: 2000 !important; }
        /* Sidebar links: loại bỏ underline & đồng nhất hiệu ứng */
        aside a {
        text-decoration: none !important;
        transition: all 0.15s ease;
        }

        aside a:hover {
        text-decoration: none !important;
        background-color: #f1f5f9 !important; /* slate-100 */
        }

        aside a:focus,
        aside a:active {
        text-decoration: none !important;
        outline: none !important;
        box-shadow: none !important;
        }

        /* Active nav highlight (màu xanh BEMART) */
        aside .nav-active {
        background-color: rgba(59,130,246,0.15) !important;
        color: #2563eb !important;
        font-weight: 600;
        text-decoration: none !important;
        }
        aside a {
        border-radius: 0.5rem; /* bo góc */
        padding: 0.5rem 0.75rem;
        }

        aside a:hover {
        background: linear-gradient(to right, #eff6ff, #f8fafc);
        }


    </style>
</head>
<body class="h-full bg-slate-50">

<div class="flex h-screen">

    <!-- Sidebar -->
    <aside class="w-64 bg-white border-r border-slate-200 flex flex-col">
        <div class="p-5 border-b border-slate-200 flex items-center gap-3">
            <i class="fas fa-cube text-primary-600 text-2xl"></i>
            <h1 class="text-xl font-bold text-slate-800">BEMART</h1>
        </div>

        <nav class="flex-1 overflow-y-auto px-3 py-4 space-y-1">
            <a href="/Home/Dashboard" data-page="dashboard" class="block px-3 py-2 rounded-lg text-slate-600 hover:bg-slate-100"><i class="fas fa-home me-2"></i> Trang chủ</a>
            <a href="/Materials/Index" data-page="materials" class="block px-3 py-2 rounded-lg text-slate-600 hover:bg-slate-100"><i class="fas fa-boxes me-2"></i> Nguyên liệu</a>
            <a href="/Warehouses/Index" data-page="warehouses" class="block px-3 py-2 rounded-lg text-slate-600 hover:bg-slate-100"><i class="fas fa-warehouse me-2"></i> Kho hàng</a>
            <a href="/Suppliers/Index" data-page="suppliers" class="block px-3 py-2 rounded-lg text-slate-600 hover:bg-slate-100"><i class="fas fa-truck-loading me-2"></i> Nhà cung cấp</a>
            <a href="/StockReceipts/Index" data-page="stockreceipts" class="block px-3 py-2 rounded-lg text-slate-600 hover:bg-slate-100"><i class="fas fa-arrow-down me-2"></i> Nhập kho</a>
            <a href="/StockIssues/Index" data-page="stockissues" class="block px-3 py-2 rounded-lg text-slate-600 hover:bg-slate-100"><i class="fas fa-arrow-up me-2"></i> Xuất kho</a>
            <a href="/Stocks/Index" data-page="stocks" class="block px-3 py-2 rounded-lg text-slate-600 hover:bg-slate-100"><i class="fas fa-layer-group me-2"></i> Tồn kho</a>

            <div class="mt-4 pt-3 border-t border-slate-200">
                <p class="px-3 text-xs uppercase text-slate-400 mb-2">Quản trị</p>
                <a href="/Reports/Revenue" class="block px-3 py-2 rounded-lg text-slate-600 hover:bg-slate-100"><i class="fas fa-chart-line me-2"></i> Báo cáo doanh thu</a>
                <a href="/Reports/Movements" class="block px-3 py-2 rounded-lg text-slate-600 hover:bg-slate-100"><i class="fas fa-exchange-alt me-2"></i> Báo cáo nhập xuất</a>
                <a href="/Reports/Inventory" class="block px-3 py-2 rounded-lg text-slate-600 hover:bg-slate-100"><i class="fas fa-clipboard-list me-2"></i> Báo cáo tồn kho</a>
                
                <a href="/StockTransfers/Index" class="block px-3 py-2 rounded-lg text-slate-600 hover:bg-slate-100"><i class="fas fa-route me-2"></i> Chuyển kho</a>
                <a href="/StockAdjustments/Index" class="block px-3 py-2 rounded-lg text-slate-600 hover:bg-slate-100"><i class="fas fa-balance-scale me-2"></i> Điều chỉnh tồn</a>
                <a href="/Users/Index" data-page="users" class="block px-3 py-2 rounded-lg text-slate-600 hover:bg-slate-100"><i class="fas fa-users me-2"></i> Người dùng</a>
                <a href="/Roles" data-page="roles" class="block px-3 py-2 rounded-lg text-slate-600 hover:bg-slate-100"><i class="fas fa-user-shield me-2"></i> Phân quyền</a>
            </div>
        </nav>

        <div class="p-4 border-t border-slate-200">
            <div class="flex items-center gap-3">
                <img src="/uploads/user.jpg" class="w-10 h-10 rounded-full object-cover" />
                <div>
                    <p class="text-sm font-semibold text-slate-700">@username</p>
                    <p class="text-xs text-slate-400">Đang online</p>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main -->
    <div class="flex-1 flex flex-col">
        <!-- Header -->
        <header class="bg-white border-b border-slate-200 px-6 py-3 flex items-center justify-between">
            <h2 class="text-lg font-semibold text-slate-800">@ViewData["Title"]</h2>

            <div class="flex items-center gap-4">
                <!-- Search -->
                <div class="hidden md:flex items-center bg-slate-100 rounded-lg px-3 py-1">
                    <i class="fas fa-search text-slate-400 me-2"></i>
                    <input type="text" placeholder="Tìm kiếm..." class="bg-transparent outline-none text-sm" />
                </div>

                <!-- Notifications -->
                <div class="dropdown">
                    <button class="btn btn-link position-relative" data-bs-toggle="dropdown">
                        <i class="fas fa-bell text-slate-600"></i>
                        <span class="position-absolute top-0 start-100 translate-middle badge bg-danger rounded-pill">3</span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end shadow rounded-3">
                        <li><span class="dropdown-item-text">Không có thông báo mới</span></li>
                    </ul>
                </div>

                <!-- User -->
                <div class="dropdown relative">
                  <button class="flex items-center gap-2 p-1.5 rounded-xl hover:bg-slate-100"
                          data-bs-toggle="dropdown" aria-expanded="false">
                      <img src="/uploads/user.jpg" 
                          class="w-10 h-10 rounded-full object-cover ring-2 ring-blue-500" />
                      <i class="fas fa-chevron-down text-xs text-slate-400"></i>
                  </button>
                  <ul class="dropdown-menu dropdown-menu-end shadow rounded-3 mt-2"
                      style="z-index:3000; min-width:220px;">
                      <li class="px-3 py-2 border-bottom">
                        <div class="d-flex align-items-center gap-2">
                          <img src="/uploads/user.jpg" class="rounded-circle" width="44" height="44"/>
                          <div>
                            <div class="fw-semibold text-dark">@username</div>
                            <div class="text-muted small">Đã đăng nhập</div>
                          </div>
                        </div>
                      </li>
                      <li><a class="dropdown-item" asp-controller="Profile" asp-action="Index"><i class="fas fa-user-circle"></i> Hồ sơ</a></li>
                      <li><a class="dropdown-item" href="#"><i class="fas fa-cog"></i> Cài đặt</a></li>
                      <li><hr class="dropdown-divider"/></li>
                      <li><a class="dropdown-item text-danger" href="/Account/Login"><i class="fas fa-sign-out-alt"></i> Đăng xuất</a></li>
                  </ul>
                </div>

            </div>
        </header>

        <!-- Content -->
        <main class="flex-1 overflow-y-auto p-6 bg-slate-50">
            @RenderBody()
        </main>

        <!-- Footer -->
        <footer class="bg-white border-t border-slate-200 px-6 py-3 text-sm text-slate-500 flex justify-between">
            <span>© @DateTime.Now.Year BEMART - Quản lý kho</span>
            <span>v2.0.0</span>
        </footer>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Active nav highlight
    (function () {
        const current = location.pathname.toLowerCase();
        const map = [
            ['dashboard', '/home/dashboard'],
            ['materials', '/materials'],
            ['warehouses', '/warehouses'],
            ['suppliers', '/suppliers'],
            ['stockreceipts', '/stockreceipts'],
            ['stockissues', '/stockissues'],
            ['stocks', '/stocks'],
            ['users', '/users'],
            ['roles', '/roles'],
        ];
        for (const [key, path] of map) {
            if (current.startsWith(path)) {
                document.querySelector(`[data-page="${key}"]`)?.classList.add('nav-active');
                break;
            }
        }
    })();
</script>
@await RenderSectionAsync("Scripts", required: false)
</body>
</html> 
